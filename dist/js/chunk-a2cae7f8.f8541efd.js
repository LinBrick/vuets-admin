(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a2cae7f8"],{"0db2":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"account-data"},[a("div",{staticClass:"add-box"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addAccount}},[e._v("新增账户")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{label:"角色",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?a("el-select",{on:{change:function(a){return e.selectChange(t.row)}},model:{value:t.row.role,callback:function(a){e.$set(t.row,"role",a)},expression:"scope.row.role"}},e._l(e.options,(function(e){return a("el-option",{key:e.key,attrs:{label:e.role,value:e.role}})})),1):a("span",[e._v(e._s(t.row.role))])]}}])}),a("el-table-column",{attrs:{label:"账号",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?a("el-input",{model:{value:t.row.username,callback:function(a){e.$set(t.row,"username",a)},expression:"scope.row.username"}}):a("span",[e._v(e._s(t.row.username))])]}}])}),a("el-table-column",{attrs:{prop:"des",label:"描述"}}),a("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return"admin"!=t.row.username?[t.row.edit?a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(a){return e.handleSave(t.$index,t.row)}}},[e._v("完成")]):a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]:void 0}}],null,!0)})],1),a("AddAccount",{attrs:{dialogVisible:e.dialogVisible,options:e.options},on:{update:e.getData,closeDialog:e.closeDialog}})],1)},n=[],r=(a("4160"),a("d81d"),a("a434"),a("159b"),a("d4ec")),c=a("bee2"),i=a("262e"),s=a("2caf"),l=a("9ab4"),u=a("60a3"),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"新增账户",visible:e.dialogVisible,"close-on-click-modal":!1,"show-close":!1,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"form-box",attrs:{rules:e.rules,model:e.account,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"请选择角色",prop:"role"}},[a("el-select",{attrs:{placeholder:"请选择角色"},on:{change:e.selectChange},model:{value:e.account.role,callback:function(t){e.$set(e.account,"role",t)},expression:"account.role"}},e._l(e.options,(function(e){return a("el-option",{key:e.key,attrs:{label:e.role,value:e.role}})})),1)],1),a("el-form-item",{attrs:{label:"请输入账号",prop:"username"}},[a("el-input",{attrs:{placeholder:"请输入账号"},model:{value:e.account.username,callback:function(t){e.$set(e.account,"username",t)},expression:"account.username"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.$emit("closeDialog")}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("确定")])],1)],1)},f=[],p=function(e){Object(i["a"])(a,e);var t=Object(s["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.account={key:"",role:"",username:"",des:""},e.rules={username:[{required:!0,message:"请输入账号",trigger:"blur"}],role:[{required:!0,message:"请选择角色",trigger:"change"}]},e}return Object(c["a"])(a,[{key:"selectChange",value:function(e){var t=this;this.options.map((function(a){a.role==e&&(t.account.key=a.key,t.account.des=a.des)}))}},{key:"handleAdd",value:function(){var e=this;this.$refs["ruleForm"].validate((function(t){t&&e.$axios.post("/api/users/addUser",e.account).then((function(t){e.$emit("update"),e.$message({message:t.data.msg,type:"success"})}))}))}}]),a}(u["e"]);Object(l["a"])([Object(u["c"])(Boolean)],p.prototype,"dialogVisible",void 0),Object(l["a"])([Object(u["c"])(Array)],p.prototype,"options",void 0),Object(l["a"])([Object(u["d"])()],p.prototype,"account",void 0),Object(l["a"])([Object(u["d"])()],p.prototype,"rules",void 0),Object(l["a"])([Object(u["b"])("closeDialog")],p.prototype,"handleAdd",null),p=Object(l["a"])([Object(u["a"])({components:{}})],p);var b=p,h=b,v=(a("9fe3"),a("2877")),m=Object(v["a"])(h,d,f,!1,null,"e135b106",null),g=m.exports,y=function(e){Object(i["a"])(a,e);var t=Object(s["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.tableData=[],e.dialogVisible=!1,e.options=[{key:"admin",role:"管理员",des:"Super Administrator. Have access to view all pages."},{key:"editor",role:"客服",des:"Normal Editor. Can see all pages except permission page"},{key:"visitor",role:"游客",des:"Just a visitor. Can only see the home page and the document page"}],e}return Object(c["a"])(a,[{key:"addAccount",value:function(){this.dialogVisible=!0}},{key:"closeDialog",value:function(){this.dialogVisible=!1}},{key:"created",value:function(){this.getData()}},{key:"handleEdit",value:function(e,t){t.edit=!0}},{key:"handleDelete",value:function(e,t){var a=this;this.$axios.delete("/api/users/deleteUser/".concat(t._id)).then((function(t){a.$message({message:t.data.msg,type:"success"}),a.tableData.splice(e,1)}))}},{key:"handleSave",value:function(e,t){var a=this;t.edit=!1,this.$axios.post("/api/users/editUser/".concat(t._id),t).then((function(e){a.$message({message:e.data.msg,type:"success"})}))}},{key:"selectChange",value:function(e){this.options.map((function(t){t.role==e.role&&(e.key=t.key,e.des=t.des)}))}},{key:"getData",value:function(){var e=this;this.$axios("/api/users/allUsers").then((function(t){t.data.datas.forEach((function(e){e.edit=!1})),e.tableData=t.data.datas}))}}]),a}(u["e"]);Object(l["a"])([Object(u["d"])()],y.prototype,"tableData",void 0),Object(l["a"])([Object(u["d"])()],y.prototype,"dialogVisible",void 0),Object(l["a"])([Object(u["d"])()],y.prototype,"options",void 0),y=Object(l["a"])([Object(u["a"])({components:{AddAccount:g}})],y);var k=y,w=k,O=(a("5caf"),Object(v["a"])(w,o,n,!1,null,"664b640a",null));t["default"]=O.exports},"159b":function(e,t,a){var o=a("da84"),n=a("fdbc"),r=a("17c2"),c=a("9112");for(var i in n){var s=o[i],l=s&&s.prototype;if(l&&l.forEach!==r)try{c(l,"forEach",r)}catch(u){l.forEach=r}}},"17c2":function(e,t,a){"use strict";var o=a("b727").forEach,n=a("a640"),r=a("ae40"),c=n("forEach"),i=r("forEach");e.exports=c&&i?[].forEach:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}},"294f":function(e,t,a){},4160:function(e,t,a){"use strict";var o=a("23e7"),n=a("17c2");o({target:"Array",proto:!0,forced:[].forEach!=n},{forEach:n})},"5caf":function(e,t,a){"use strict";var o=a("c197"),n=a.n(o);n.a},8418:function(e,t,a){"use strict";var o=a("c04e"),n=a("9bf2"),r=a("5c6c");e.exports=function(e,t,a){var c=o(t);c in e?n.f(e,c,r(0,a)):e[c]=a}},"9fe3":function(e,t,a){"use strict";var o=a("294f"),n=a.n(o);n.a},a434:function(e,t,a){"use strict";var o=a("23e7"),n=a("23cb"),r=a("a691"),c=a("50c4"),i=a("7b0b"),s=a("65f0"),l=a("8418"),u=a("1dde"),d=a("ae40"),f=u("splice"),p=d("splice",{ACCESSORS:!0,0:0,1:2}),b=Math.max,h=Math.min,v=9007199254740991,m="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!f||!p},{splice:function(e,t){var a,o,u,d,f,p,g=i(this),y=c(g.length),k=n(e,y),w=arguments.length;if(0===w?a=o=0:1===w?(a=0,o=y-k):(a=w-2,o=h(b(r(t),0),y-k)),y+a-o>v)throw TypeError(m);for(u=s(g,o),d=0;d<o;d++)f=k+d,f in g&&l(u,d,g[f]);if(u.length=o,a<o){for(d=k;d<y-o;d++)f=d+o,p=d+a,f in g?g[p]=g[f]:delete g[p];for(d=y;d>y-o+a;d--)delete g[d-1]}else if(a>o)for(d=y-o;d>k;d--)f=d+o-1,p=d+a-1,f in g?g[p]=g[f]:delete g[p];for(d=0;d<a;d++)g[d+k]=arguments[d+2];return g.length=y-o+a,u}})},c197:function(e,t,a){},d81d:function(e,t,a){"use strict";var o=a("23e7"),n=a("b727").map,r=a("1dde"),c=a("ae40"),i=r("map"),s=c("map");o({target:"Array",proto:!0,forced:!i||!s},{map:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-a2cae7f8.f8541efd.js.map